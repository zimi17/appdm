(()=>{"use strict";const e="update",t="remove";class n{constructor(e,t){this.dom=e,this.data=t}run(){throw new Error(`Action type '${this.data.type}' - not implemented`)}getElementByXPath(e){return this.dom.evaluate(e,this.dom,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}createElement(e,t=[],n=""){const r=document.createElement(e);return t.forEach(e=>{r.setAttribute(e.name,e.value)}),n&&(r.textContent=n),r}}class r extends n{run(){const{xpath:n,action:r,attribute_name:i,attribute_value:a}=this.data,s=n.replace("svg","*[name()='svg']"),o=this.getElementByXPath(s);if(!o)return!1;switch(r){case"add":case e:o.setAttribute(i,a);const n={alt:["role","title"],role:["alt","title"]};n[i]&&n[i].forEach(e=>o.removeAttribute(e));break;case t:o.removeAttribute(i);break;case"clear":o.setAttribute(i,"")}return!0}}class i extends n{run(){const{xpath:n,action:r,content:i,child:a}=this.data,s=this.getElementByXPath(n);if(!s)return!1;let o=null;if(a)try{o=this.createElement(a.tag,a.attributes||[],a.content||"")}catch(e){return}switch(r){case e:s.nodeValue=i;break;case t:s.remove();break;case"add_child":o&&s.appendChild(o);break;case"remove_child":o&&s.removeChild(o);break;case"add_before":o&&s.parentNode&&s.parentNode.insertBefore(o,s);break;case"add_after":o&&s.parentNode&&s.parentNode.insertBefore(o,s.nextSibling)}return!0}}class a extends n{replaceIgnoreCase(e,t,n,r,i){const a=r.indexOf(i);return-1===a?e:e.substring(0,a)+n+e.substring(a+t.length)}run(){const{xpath:e,find:t,replace:n}=this.data,r=this.getElementByXPath(e);if(!r)return!1;const i=r.outerHTML;if("string"!=typeof t||"string"!=typeof n)return!1;const a=i.toLowerCase(),s=t.toLowerCase();if(!a.includes(s))return!1;const o=this.replaceIgnoreCase(i,t,n,a,s);if(o===i)return!1;const l=document.createElement("div");l.innerHTML=o;const c=l.firstElementChild;return c&&r.parentNode&&r.parentNode.replaceChild(c,r),!0}}class s{constructor(e){this.remediations=e,this.classMap={attribute:r,element:i,replace:a},this.checkTimeout=null,this.runAll()}runAll(){this.remediations=this.remediations.filter(e=>!this.runRemediation(e))}runRemediation(e){const t=(e.type||"").toLowerCase(),n=this.classMap[t];if(n)try{return new n(document,e).run()}catch(t){window.AllyRemediations?.debug&&window.AllyRemediations.debug&&console.error("Remediation failed",t,e)}return!1}checkRemediations(){this.isComplete()||this.runAll()}isComplete(){return 0===this.remediations.length}}if(window?.AllyRemediations&&Array.isArray(window.AllyRemediations?.remediations)){let o=null,l=null,c=!1;function d(){c?o.runAll():(c=!0,o=new s(window.AllyRemediations.remediations),window.MutationObserver&&o.remediations.length>0&&(l=new MutationObserver(e=>{let t=!1;for(const n of e)if("childList"===n.type&&n.addedNodes.length>0){t=!0;break}t&&(clearTimeout(o.checkTimeout),o.checkTimeout=setTimeout(()=>{o.checkRemediations(),o.isComplete()&&l&&(l.disconnect(),l=null)},100))}),l.observe(document.body,{childList:!0,subtree:!0})))}window.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{d()},400)}),"loading"!==document.readyState&&setTimeout(()=>{d()},400)}})();