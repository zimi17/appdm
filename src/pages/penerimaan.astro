---
import MainLayout from '../components/layout/MainLayout.astro';
import { quizQuestions, quizResults } from '../data/quiz.ts';
---

<MainLayout title="Penerimaan Mahasiswa Baru - STIE Dwimulya">
  <section class="py-10 lg:py-20">
    <div class="container mx-auto px-4">
      <h1 class="text-4xl font-bold text-default-950 mb-8">Penerimaan Mahasiswa Baru</h1>
      <p class="text-lg text-gray-700 mb-4">Selamat datang calon mahasiswa STIE Dwimulya! Kami membuka kesempatan bagi Anda untuk bergabung dan mengembangkan potensi diri di kampus kami.</p>
      
      <h2 class="text-3xl font-bold text-default-950 mb-6 mt-12">Persyaratan Pendaftaran</h2>
      <ul class="list-disc list-inside text-lg text-gray-700 mb-4">
        <li>Lulusan SMA/SMK/MA atau sederajat.</li>
        <li>Mengisi formulir pendaftaran secara online atau offline.</li>
        <li>Melampirkan fotokopi ijazah dan transkrip nilai yang dilegalisir.</li>
        <li>Melampirkan fotokopi KTP dan Kartu Keluarga.</li>
        <li>Pas foto berwarna terbaru ukuran 3x4 (2 lembar).</li>
        <li>Membayar biaya pendaftaran.</li>
      </ul>

      <h2 class="text-3xl font-bold text-default-950 mb-6 mt-12">Prosedur Pendaftaran Online</h2>
      <ol class="list-decimal list-inside text-lg text-gray-700 mb-4">
        <li>Kunjungi portal PMB Online kami.</li>
        <li>Buat akun dan lengkapi data diri.</li>
        <li>Unggah dokumen persyaratan yang diminta.</li>
        <li>Lakukan pembayaran biaya pendaftaran melalui metode yang tersedia.</li>
        <li>Cetak kartu ujian (jika ada ujian saringan).</li>
        <li>Ikuti proses seleksi sesuai jadwal.</li>
      </ol>

      <h2 class="text-3xl font-bold text-default-950 mb-6 mt-12">Jadwal Penting</h2>
      <ul class="list-disc list-inside text-lg text-gray-700 mb-4">
        <li>Pendaftaran Gelombang 1: 1 Mei - 30 Juni 2025</li>
        <li>Pendaftaran Gelombang 2: 1 Juli - 31 Agustus 2025</li>
        <li>Ujian Saringan Masuk: (akan diumumkan kemudian)</li>
        <li>Pengumuman Hasil: (akan diumumkan kemudian)</li>
      </ul>

      <div class="mt-12 text-center">
        <a href="https://pmb.stiedwimulya.ac.id" target="_blank" rel="noopener noreferrer" class="inline-block bg-primary text-white text-xl font-bold py-3 px-8 rounded-lg hover:bg-primary-dark transition duration-300">
          Daftar Sekarang
        </a>
      </div>

      <h2 class="text-3xl font-bold text-default-950 mb-6 mt-12">Temukan Jurusan yang Cocok untuk Anda!</h2>
      <p class="text-lg text-gray-700 mb-8">Ikuti kuis singkat ini untuk membantu Anda menemukan program studi yang paling sesuai dengan minat dan bakat Anda.</p>

      <div id="quiz-container" class="bg-white rounded-lg shadow-md p-6">
        <div id="quiz-questions">
          {quizQuestions.map((q, qIndex) => (
            <div class="mb-6" data-question-index={qIndex}>
              <p class="text-xl font-semibold text-default-950 mb-4">{qIndex + 1}. {q.question}</p>
              <div class="space-y-2">
                {q.options.map((option, oIndex) => (
                  <label class="flex items-center text-lg text-gray-700">
                    <input type="radio" name={`question-${qIndex}`} value={option.value} class="mr-2 quiz-option" />
                    {option.text}
                  </label>
                ))}
              </div>
            </div>
          ))}
          <button id="submit-quiz" class="mt-8 inline-block bg-blue-600 text-white text-xl font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition duration-300">Lihat Hasil</button>
        </div>
        <div id="quiz-result" class="hidden mt-8 text-center">
          <h3 class="text-3xl font-bold text-default-950 mb-4">Hasil Rekomendasi Jurusan:</h3>
          <p id="result-title" class="text-2xl font-semibold text-primary mb-4"></p>
          <p id="result-description" class="text-lg text-gray-700 mb-6"></p>
          <a id="result-link" href="#" class="inline-block bg-green-600 text-white text-xl font-bold py-3 px-8 rounded-lg hover:bg-green-700 transition duration-300">Pelajari Lebih Lanjut</a>
        </div>
      </div>

      <h2 class="text-3xl font-bold text-default-950 mb-6 mt-12">Formulir Pendaftaran</h2>
      <p class="text-lg text-gray-700 mb-8">Anda juga dapat mengisi formulir di bawah ini dan kami akan menghubungi Anda kembali.</p>
      <form id="admission-form" class="space-y-4 p-6 bg-white rounded-lg shadow-md">
        <div>
          <label for="form-name" class="block text-lg font-medium text-gray-700">Nama Lengkap</label>
          <input type="text" id="form-name" name="name" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary" placeholder="Nama Lengkap Anda" required>
        </div>
        <div>
          <label for="form-email" class="block text-lg font-medium text-gray-700">Email</label>
          <input type="email" id="form-email" name="email" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary" placeholder="email@example.com" required>
        </div>
        <div>
          <label for="form-phone" class="block text-lg font-medium text-gray-700">Nomor Telepon</label>
          <input type="tel" id="form-phone" name="phone" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary" placeholder="Contoh: 08123456789" required>
        </div>
        <div>
          <label for="form-major" class="block text-lg font-medium text-gray-700">Pilihan Program Studi</label>
          <select id="form-major" name="major" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary" required>
            <option value="">Pilih Program Studi</option>
            <option value="Akuntansi">Akuntansi</option>
            <option value="Manajemen">Manajemen</option>
            <option value="Belum Yakin">Belum Yakin</option>
          </select>
        </div>
        <div>
          <label for="form-message" class="block text-lg font-medium text-gray-700">Pesan Tambahan (Opsional)</label>
          <textarea id="form-message" name="message" rows="4" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary" placeholder="Tulis pesan Anda di sini..."></textarea>
        </div>
        <button type="submit" class="inline-block bg-primary text-white text-xl font-bold py-3 px-8 rounded-lg hover:bg-primary-dark transition duration-300">Kirim Formulir</button>
      </form>
    </div>
  </section>
</MainLayout>

<script is:inline>
  const quizQuestions = [
    {
      question: 'Mata pelajaran apa yang paling Anda nikmati di sekolah?',
      options: [
        { text: 'Matematika dan Ekonomi', value: 'accounting' },
        { text: 'Bisnis dan Organisasi', value: 'management' },
        { text: 'Seni dan Kreativitas', value: 'neutral' },
      ],
    },
    {
      question: 'Jenis tugas apa yang paling Anda sukai?',
      options: [
        { text: 'Menganalisis angka dan data keuangan', value: 'accounting' },
        { text: 'Merencanakan strategi dan memimpin tim', value: 'management' },
        { text: 'Berinteraksi dengan banyak orang', value: 'neutral' },
      ],
    },
    {
      question: 'Apa tujuan karir Anda di masa depan?',
      options: [
        { text: 'Menjadi ahli keuangan atau auditor', value: 'accounting' },
        { text: 'Menjadi pemimpin bisnis atau manajer', value: 'management' },
        { text: 'Membangun usaha sendiri', value: 'neutral' },
      ],
    },
    {
      question: 'Bagaimana Anda menghadapi masalah?',
      options: [
        { text: 'Mencari solusi berdasarkan data dan fakta', value: 'accounting' },
        { text: 'Mengorganisir tim untuk menemukan solusi', value: 'management' },
        { text: 'Berpikir out-of-the-box', value: 'neutral' },
      ],
    },
  ];

  const quizResults = {
    accounting: {
      title: 'Program Studi Akuntansi',
      description: 'Berdasarkan jawaban Anda, Program Studi Akuntansi mungkin cocok untuk Anda. Anda memiliki minat pada analisis angka, data keuangan, dan karir di bidang keuangan atau auditing.',
      link: '/program-studi/akuntansi',
    },
    management: {
      title: 'Program Studi Manajemen',
      description: 'Berdasarkan jawaban Anda, Program Studi Manajemen mungkin cocok untuk Anda. Anda tertarik pada perencanaan strategi, kepemimpinan, dan karir di bidang manajemen atau kewirausahaan.',
      link: '/program-studi/manajemen',
    },
    neutral: {
      title: 'Jelajahi Kedua Program Studi',
      description: 'Pilihan Anda menunjukkan minat yang seimbang. Kami sarankan Anda menjelajahi lebih lanjut Program Studi Akuntansi dan Manajemen untuk menemukan yang paling sesuai dengan passion Anda.',
      link: '/program-studi',
    },
  };

  document.addEventListener('DOMContentLoaded', () => {
    const submitQuizButton = document.getElementById('submit-quiz');
    const quizQuestionsDiv = document.getElementById('quiz-questions');
    const quizResultDiv = document.getElementById('quiz-result');
    const resultTitle = document.getElementById('result-title');
    const resultDescription = document.getElementById('result-description');
    const resultLink = document.getElementById('result-link');
    const admissionForm = document.getElementById('admission-form');

    submitQuizButton.addEventListener('click', () => {
      let accountingScore = 0;
      let managementScore = 0;

      quizQuestions.forEach((q, qIndex) => {
        const selectedOption = document.querySelector(`input[name="question-${qIndex}"]:checked`);
        if (selectedOption) {
          if (selectedOption.value === 'accounting') {
            accountingScore++;
          } else if (selectedOption.value === 'management') {
            managementScore++;
          }
        }
      });

      let resultKey = 'neutral';
      if (accountingScore > managementScore) {
        resultKey = 'accounting';
      } else if (managementScore > accountingScore) {
        resultKey = 'management';
      }

      const result = quizResults[resultKey];
      resultTitle.textContent = result.title;
      resultDescription.textContent = result.description;
      resultLink.href = result.link;

      quizQuestionsDiv.classList.add('hidden');
      quizResultDiv.classList.remove('hidden');
    });

    admissionForm.addEventListener('submit', (event) => {
      event.preventDefault();

      const name = document.getElementById('form-name').value;
      const email = document.getElementById('form-email').value;
      const phone = document.getElementById('form-phone').value;
      const major = document.getElementById('form-major').value;
      const message = document.getElementById('form-message').value;

      const subject = `Pendaftaran Mahasiswa Baru - ${name}`;
      const body = `Nama Lengkap: ${name}\nEmail: ${email}\nNomor Telepon: ${phone}\nPilihan Program Studi: ${major}\nPesan Tambahan: ${message}`;

      window.location.href = `mailto:stie.dwimulya@yahoo.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    });
  });
</script>