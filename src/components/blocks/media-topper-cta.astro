---
// src/components/HeroSection.astro
// Komponen hero section yang atomik, dapat digunakan kembali, dengan animasi GSAP.

// 1. DEFINISI PROPS (TYPESCRIPT)
// Mendefinisikan tipe data untuk props agar lebih aman dan mudah digunakan.
export interface Image {
    src: string;
    alt: string;
}

export interface Props {
    title?: string;
    buttonText?: string;
    buttonUrl?: string;
    images?: Image[];
}

// 2. DESTRUKTURISASI PROPS DENGAN NILAI DEFAULT
// Memberikan nilai default agar komponen bisa langsung dipakai tanpa harus mengisi semua props.
const {
    title = "Two Years. A World of <br /> Difference.",
    buttonText = "Introduce Yourself",
    buttonUrl = "#",
    images = [
        {
            src: "https://placehold.co/400x400/5A9A48/FFFFFF?text=Campus",
            alt: "Students walking on a lush green campus",
        },
        {
            src: "https://placehold.co/800x400/A88F7D/FFFFFF?text=Classroom",
            alt: "A professor lecturing a diverse classroom of students",
        },
        {
            src: "https://placehold.co/400x400/D63B3B/FFFFFF?text=Graduation",
            alt: "A student cheering excitedly at her graduation ceremony",
        },
    ],
} = Astro.props;
---

<!-- 
  CARA PENGGUNAAN:
  1. Simpan file ini sebagai `src/components/HeroSection.astro`.
  2. Impor dan gunakan di halaman Astro Anda:

  ---
  import HeroSection from '../components/HeroSection.astro';
  ---
  <HeroSection />

  3. Atau kustomisasi dengan props:

  <HeroSection
    title="Judul Kustom Anda"
    buttonText="Pelajari Lebih Lanjut"
    images={[
      { src: '/gambar/baru1.jpg', alt: 'Deskripsi 1' },
      { src: '/gambar/baru2.jpg', alt: 'Deskripsi 2' },
      { src: '/gambar/baru3.jpg', alt: 'Deskripsi 3' }
    ]}
  />
-->

<!-- 3. STRUKTUR HTML (TEMPLATE) -->
<section class="hero-section bg-gray-900 text-white font-sans overflow-hidden">
    <!-- Impor Font dan GSAP dari CDN -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
        rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"
    ></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"
    ></script>

    <div class="container mx-auto px-6 py-16 md:py-24">
        <div
            class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10"
        >
            <h1
                class="anim-title text-4xl md:text-5xl lg:text-6xl font-bold leading-tight mb-6 md:mb-0"
                set:html={title}
            />

            <a
                href={buttonUrl}
                class="cta-button inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md bg-gray-200 text-gray-800 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-blue-500"
                aria-label={buttonText}
            >
                <span class="hover-effect"></span>
                <span class="button-content">
                    <span>{buttonText}</span>
                    <svg
                        class="arrow-svg w-5 h-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                        ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg
                    >
                </span>
            </a>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-9 gap-4 lg:gap-6">
            <!-- Gambar dirender secara dinamis dari props -->
            <div
                class="anim-image md:col-span-2 w-full h-64 md:h-80 rounded-lg overflow-hidden"
            >
                <img
                    src={images[0].src}
                    alt={images[0].alt}
                    class="w-full h-full object-cover"
                    onerror={`this.onerror=null;this.src='https://placehold.co/400x400/cccccc/ffffff?text=Not+Found';`}
                />
            </div>
            <div
                class="anim-image md:col-span-5 w-full h-64 md:h-80 rounded-lg overflow-hidden"
            >
                <img
                    src={images[1].src}
                    alt={images[1].alt}
                    class="w-full h-full object-cover"
                    onerror={`this.onerror=null;this.src='https://placehold.co/800x400/cccccc/ffffff?text=Not+Found';`}
                />
            </div>
            <div
                class="anim-image md:col-span-2 w-full h-64 md:h-80 rounded-lg overflow-hidden"
            >
                <img
                    src={images[2].src}
                    alt={images[2].alt}
                    class="w-full h-full object-cover"
                    onerror={`this.onerror=null;this.src='https://placehold.co/400x400/cccccc/ffffff?text=Not+Found';`}
                />
            </div>
        </div>
    </div>
</section>

<!-- 4. GAYA CSS (TERISOLASI) -->
<style>
    .font-sans {
        font-family: "Inter", sans-serif;
    }
    .anim-title,
    .anim-image,
    .cta-button {
        opacity: 0;
        transform: translateY(30px);
    }
    .cta-button {
        position: relative;
        overflow: hidden;
        z-index: 1;
    }
    .cta-button .hover-effect {
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        background-color: #002147; /* Oxford Blue */
        border-radius: 50%;
        transform: translate(-50%, -50%);
        z-index: -1;
    }
    .cta-button .button-content {
        display: inline-flex;
        align-items: center;
    }
    .cta-button .arrow-svg {
        transition: transform 0.4s ease;
        margin-left: 0.5rem;
    }
</style>

<!-- 5. JAVASCRIPT SISI KLIEN -->
<script>
    // Fungsi ini akan berjalan di browser pengguna
    function setupAnimations() {
        gsap.registerPlugin(ScrollTrigger);

        const heroSection = document.querySelector(".hero-section");
        if (!heroSection) return;

        // Animasi Scroll
        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: heroSection,
                start: "top 80%",
                toggleActions: "play none none none",
            },
        });

        tl.to(".anim-title", {
            duration: 0.8,
            opacity: 1,
            y: 0,
            ease: "power3.out",
        })
            .to(
                ".cta-button",
                { duration: 0.8, opacity: 1, y: 0, ease: "power3.out" },
                "-=0.6",
            )
            .to(
                ".anim-image",
                {
                    duration: 0.8,
                    opacity: 1,
                    y: 0,
                    ease: "power3.out",
                    stagger: 0.2,
                },
                "-=0.6",
            );

        // Animasi Hover Tombol
        const button = heroSection.querySelector(".cta-button");
        if (button) {
            const hoverEffect = button.querySelector(".hover-effect");
            const buttonContent = button.querySelector(".button-content");
            const arrow = button.querySelector(".arrow-svg");
            const size =
                Math.max(button.offsetWidth, button.offsetHeight) * 2.5;

            button.addEventListener("mouseenter", (e) => {
                const rect = button.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                gsap.to(hoverEffect, {
                    top: y,
                    left: x,
                    width: size,
                    height: size,
                    duration: 0.4,
                    ease: "power2.inOut",
                });
                gsap.to(buttonContent, {
                    color: "#F3F4F6",
                    duration: 0.4,
                    ease: "power2.inOut",
                });
                gsap.to(arrow, { x: 5, duration: 0.4, ease: "power2.inOut" });
            });

            button.addEventListener("mouseleave", (e) => {
                const rect = button.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                gsap.to(hoverEffect, {
                    top: y,
                    left: x,
                    width: 0,
                    height: 0,
                    duration: 0.4,
                    ease: "power2.inOut",
                });
                gsap.to(buttonContent, {
                    color: "#1F2937",
                    duration: 0.4,
                    ease: "power2.inOut",
                });
                gsap.to(arrow, { x: 0, duration: 0.4, ease: "power2.inOut" });
            });
        }
    }

    // Menjalankan skrip setelah halaman dimuat
    document.addEventListener("astro:page-load", setupAnimations);
</script>
